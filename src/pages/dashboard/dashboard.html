<!--
  Generated template for the DashboardPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <ion-title>Dashboard</ion-title>
  </ion-navbar>
</ion-header>

<ion-content padding="">
  <ion-header>
    <ion-toolbar class="btn-wrapper">
      <div [ngSwitch]="typeData" *ngIf="pageTriger == 'list'">
        <div>
          <ion-title *ngSwitchCase="'commentsData'" id="subheader">Top Comments Users on Your Posts</ion-title>
          <ion-title *ngSwitchCase="'likesData'" id="subheader">Top Likes Users on Your Posts</ion-title>

          <ion-segment [(ngModel)]="typeData" color="primary">
            <ion-segment-button value="commentsData">
              Top Comments
            </ion-segment-button>
            <ion-segment-button value="likesData">
              Top Likes
            </ion-segment-button>
          </ion-segment>
        </div>
      </div>
      <div *ngIf="pageTriger == 'chart'">
        <ion-title>Your Posts Summary</ion-title>
      </div>
    </ion-toolbar>
  </ion-header>


  <ion-refresher (ionRefresh)="doRefresh($event)">
    <ion-refresher-content pullingIcon="arrow-dropdown" pullingText="Pull to refresh" refreshingSpinner="circles" refreshingText="Refreshing...">
    </ion-refresher-content>
  </ion-refresher>
  <div *ngIf="pageTriger == 'chart'" class='dashboardContent'>
    <ion-card>
      <ion-card-header>
        Top post
      </ion-card-header>
      <ion-card-content>
        <canvas #barCanvas type></canvas>
      </ion-card-content>
    </ion-card>
  </div>
  <div *ngIf="pageTriger == 'list'" class='dashboardContent'>
    <div [ngSwitch]="typeData">
      <div *ngSwitchCase="'commentsData'">
        <ion-list *ngFor="let item of commentsData">
          <ion-card>
            <ion-card-content>
              <ion-grid no-padding>
                <ion-row>
                  <ion-col>
                    <img src="http://graph.facebook.com/{{item._uid}}/picture?type=square" style="height: 75px;width: 75px;">
                  </ion-col>
                  <ion-col col-9>
                    <ion-card-header (click)="presentProfileModal(item._uid,item.name)">
                      <div style="word-wrap: break-word">{{item.name}}</div>
                    </ion-card-header>
                    <div *ngIf="item.comments" id='subcard'>Comments
                      <ion-icon name="text"></ion-icon> {{item.comments}} </div>
                  </ion-col>
                </ion-row>
              </ion-grid>
            </ion-card-content>
          </ion-card>
        </ion-list>
      </div>
      <div *ngSwitchCase="'likesData'">
        <ion-list *ngFor="let item of reactionsData">
          <ion-card>
            <ion-card-content>
              <ion-grid no-padding>
                <ion-row>
                  <ion-col >
                    <img src="http://graph.facebook.com/{{item._uid}}/picture?type=square" style="height: 75px;width: 75px;">
                  </ion-col>
                  <ion-col col-9>
                    <ion-card-header (click)="presentProfileModal(item._uid,item.name)">
                      <div style="word-wrap: break-word">{{item.name}}</div>
                      <button ion-button style="padding-left:0px;">
                        <ion-icon style="color:red;margin-left:10px" name="md-flame"></ion-icon> {{item.total}}</button>
                    </ion-card-header>
                    <div *ngIf="item.total" id='subcard'>
                      <ion-grid>
                        <ion-row>
                          <ion-col>
                            <ion-icon style="color:aqua;" name="ios-thumbs-up"></ion-icon>{{item.like}} </ion-col>
                          <ion-col><ion-icon style="color:crimson;" name="ios-heart"></ion-icon>{{item.love}}</ion-col>
                          <ion-col><ion-icon style="color:goldenrod;" name="md-outlet"></ion-icon>{{item.wow}}</ion-col>
                          <ion-col><ion-icon style="color:goldenrod;" name="ios-happy"></ion-icon>{{item.haha}}</ion-col>
                        </ion-row>
                        <ion-row>
                          <ion-col><ion-icon style="color:goldenrod;" name="ios-sad"></ion-icon>{{item.sad}} </ion-col>
                          <ion-col><ion-icon style="color:goldenrod;" name="alert"></ion-icon>{{item.angry}}</ion-col>
                          <ion-col><ion-icon style="color:purple;" name="flower"></ion-icon>{{item.thankful}}</ion-col>
                        </ion-row>
                      </ion-grid>
                    </div>
                  </ion-col>
                </ion-row>
              </ion-grid>
            </ion-card-content>
          </ion-card>
        </ion-list>
      </div>
      <div>
        <ion-grid no-padding>
          <ion-row>
            <ion-col col-10>
              <ion-select [(ngModel)]="sortByTime" (ionChange)="getFacebookData()">
                <ion-option>Last 1 week</ion-option>
                <ion-option>Last 1 month</ion-option>
                <ion-option>Last 3 months</ion-option>
                <ion-option>Last 6 months</ion-option>
                <ion-option>Last 1 year</ion-option>
                <ion-option>Last 2 years</ion-option>
                <ion-option>Last 5 years</ion-option>
              </ion-select>
            </ion-col>
            <ion-col>
              <label ion-item (click)="getAllTops()">See more ...</label>
            </ion-col>
          </ion-row>
        </ion-grid>
      </div>
    </div>
  </div>
</ion-content>
<ion-footer>
  <div class="btn-wrapper">
    <button ion-button icon-only color="secondary" (click)='trigerPage()'>
      <ion-icon name="arrow-up" *ngIf="pageTriger == 'list'"></ion-icon>
      <ion-icon name="arrow-down" *ngIf="pageTriger == 'chart'"></ion-icon>
    </button>
  </div>
</ion-footer>